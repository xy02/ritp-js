!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.ritp=e():t.ritp=e()}(window,function(){return d=[function(t,e,n){"use strict";var r,o,i,s,u,c,a,l,f=n(4),h=f.Reader,p=f.Writer,d=f.util,y=f.roots.default||(f.roots.default={});function b(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}function v(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}function m(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}function w(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}function g(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}function _(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}function O(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}function x(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}y.ritp=((l={}).PeerInfo=(b.prototype.vertion="",b.prototype.metadata=d.newBuffer([]),b.prototype.chunk=d.newBuffer([]),b.create=function(t){return new b(t)},b.encode=function(t,e){return e=e||p.create(),null!=t.vertion&&Object.hasOwnProperty.call(t,"vertion")&&e.uint32(10).string(t.vertion),null!=t.metadata&&Object.hasOwnProperty.call(t,"metadata")&&e.uint32(18).bytes(t.metadata),null!=t.chunk&&Object.hasOwnProperty.call(t,"chunk")&&e.uint32(26).bytes(t.chunk),e},b.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},b.decode=function(t,e){t instanceof h||(t=h.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new y.ritp.PeerInfo;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.vertion=t.string();break;case 2:r.metadata=t.bytes();break;case 3:r.chunk=t.bytes();break;default:t.skipType(7&o)}}return r},b.decodeDelimited=function(t){return t instanceof h||(t=new h(t)),this.decode(t,t.uint32())},b.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.vertion&&t.hasOwnProperty("vertion")&&!d.isString(t.vertion)?"vertion: string expected":null!=t.metadata&&t.hasOwnProperty("metadata")&&!(t.metadata&&"number"==typeof t.metadata.length||d.isString(t.metadata))?"metadata: buffer expected":null!=t.chunk&&t.hasOwnProperty("chunk")&&!(t.chunk&&"number"==typeof t.chunk.length||d.isString(t.chunk))?"chunk: buffer expected":null},b.fromObject=function(t){if(t instanceof y.ritp.PeerInfo)return t;var e=new y.ritp.PeerInfo;return null!=t.vertion&&(e.vertion=String(t.vertion)),null!=t.metadata&&("string"==typeof t.metadata?d.base64.decode(t.metadata,e.metadata=d.newBuffer(d.base64.length(t.metadata)),0):t.metadata.length&&(e.metadata=t.metadata)),null!=t.chunk&&("string"==typeof t.chunk?d.base64.decode(t.chunk,e.chunk=d.newBuffer(d.base64.length(t.chunk)),0):t.chunk.length&&(e.chunk=t.chunk)),e},b.toObject=function(t,e){var n={};return(e=e||{}).defaults&&(n.vertion="",e.bytes===String?n.metadata="":(n.metadata=[],e.bytes!==Array&&(n.metadata=d.newBuffer(n.metadata))),e.bytes===String?n.chunk="":(n.chunk=[],e.bytes!==Array&&(n.chunk=d.newBuffer(n.chunk)))),null!=t.vertion&&t.hasOwnProperty("vertion")&&(n.vertion=t.vertion),null!=t.metadata&&t.hasOwnProperty("metadata")&&(n.metadata=e.bytes===String?d.base64.encode(t.metadata,0,t.metadata.length):e.bytes===Array?Array.prototype.slice.call(t.metadata):t.metadata),null!=t.chunk&&t.hasOwnProperty("chunk")&&(n.chunk=e.bytes===String?d.base64.encode(t.chunk,0,t.chunk.length):e.bytes===Array?Array.prototype.slice.call(t.chunk):t.chunk),n},b.prototype.toJSON=function(){return this.constructor.toObject(this,f.util.toJSONOptions)},b),l.Frame=(v.prototype.pull=0,v.prototype.event=null,v.prototype.control=null,v.prototype.disconnect=null,Object.defineProperty(v.prototype,"type",{get:d.oneOfGetter(r=["pull","event","control","disconnect"]),set:d.oneOfSetter(r)}),v.create=function(t){return new v(t)},v.encode=function(t,e){return e=e||p.create(),null!=t.pull&&Object.hasOwnProperty.call(t,"pull")&&e.uint32(8).uint32(t.pull),null!=t.event&&Object.hasOwnProperty.call(t,"event")&&y.ritp.Event.encode(t.event,e.uint32(18).fork()).ldelim(),null!=t.control&&Object.hasOwnProperty.call(t,"control")&&y.ritp.Control.encode(t.control,e.uint32(26).fork()).ldelim(),null!=t.disconnect&&Object.hasOwnProperty.call(t,"disconnect")&&y.ritp.Disconnect.encode(t.disconnect,e.uint32(34).fork()).ldelim(),e},v.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},v.decode=function(t,e){t instanceof h||(t=h.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new y.ritp.Frame;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.pull=t.uint32();break;case 2:r.event=y.ritp.Event.decode(t,t.uint32());break;case 3:r.control=y.ritp.Control.decode(t,t.uint32());break;case 4:r.disconnect=y.ritp.Disconnect.decode(t,t.uint32());break;default:t.skipType(7&o)}}return r},v.decodeDelimited=function(t){return t instanceof h||(t=new h(t)),this.decode(t,t.uint32())},v.verify=function(t){if("object"!=typeof t||null===t)return"object expected";var e,n={};if(null!=t.pull&&t.hasOwnProperty("pull")&&(n.type=1,!d.isInteger(t.pull)))return"pull: integer expected";if(null!=t.event&&t.hasOwnProperty("event")){if(1===n.type)return"type: multiple values";if(n.type=1,e=y.ritp.Event.verify(t.event))return"event."+e}if(null!=t.control&&t.hasOwnProperty("control")){if(1===n.type)return"type: multiple values";if(n.type=1,e=y.ritp.Control.verify(t.control))return"control."+e}if(null!=t.disconnect&&t.hasOwnProperty("disconnect")){if(1===n.type)return"type: multiple values";if(n.type=1,e=y.ritp.Disconnect.verify(t.disconnect))return"disconnect."+e}return null},v.fromObject=function(t){if(t instanceof y.ritp.Frame)return t;var e=new y.ritp.Frame;if(null!=t.pull&&(e.pull=t.pull>>>0),null!=t.event){if("object"!=typeof t.event)throw TypeError(".ritp.Frame.event: object expected");e.event=y.ritp.Event.fromObject(t.event)}if(null!=t.control){if("object"!=typeof t.control)throw TypeError(".ritp.Frame.control: object expected");e.control=y.ritp.Control.fromObject(t.control)}if(null!=t.disconnect){if("object"!=typeof t.disconnect)throw TypeError(".ritp.Frame.disconnect: object expected");e.disconnect=y.ritp.Disconnect.fromObject(t.disconnect)}return e},v.toObject=function(t,e){e=e||{};var n={};return null!=t.pull&&t.hasOwnProperty("pull")&&(n.pull=t.pull,e.oneofs&&(n.type="pull")),null!=t.event&&t.hasOwnProperty("event")&&(n.event=y.ritp.Event.toObject(t.event,e),e.oneofs&&(n.type="event")),null!=t.control&&t.hasOwnProperty("control")&&(n.control=y.ritp.Control.toObject(t.control,e),e.oneofs&&(n.type="control")),null!=t.disconnect&&t.hasOwnProperty("disconnect")&&(n.disconnect=y.ritp.Disconnect.toObject(t.disconnect,e),e.oneofs&&(n.type="disconnect")),n},v.prototype.toJSON=function(){return this.constructor.toObject(this,f.util.toJSONOptions)},v),l.Disconnect=(m.create=function(t){return new m(t)},m.encode=function(t,e){return e=e||p.create()},m.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},m.decode=function(t,e){t instanceof h||(t=h.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new y.ritp.Disconnect;t.pos<n;){var o=t.uint32();t.skipType(7&o)}return r},m.decodeDelimited=function(t){return t instanceof h||(t=new h(t)),this.decode(t,t.uint32())},m.verify=function(t){return"object"!=typeof t||null===t?"object expected":null},m.fromObject=function(t){return t instanceof y.ritp.Disconnect?t:new y.ritp.Disconnect},m.toObject=function(){return{}},m.prototype.toJSON=function(){return this.constructor.toObject(this,f.util.toJSONOptions)},m),l.Event=(w.prototype.streamId=d.Long?d.Long.fromBits(0,0,!0):0,w.prototype.request=null,w.prototype.chunk=d.newBuffer([]),w.prototype.end=null,Object.defineProperty(w.prototype,"type",{get:d.oneOfGetter(o=["request","chunk","end"]),set:d.oneOfSetter(o)}),w.create=function(t){return new w(t)},w.encode=function(t,e){return e=e||p.create(),null!=t.streamId&&Object.hasOwnProperty.call(t,"streamId")&&e.uint32(8).uint64(t.streamId),null!=t.request&&Object.hasOwnProperty.call(t,"request")&&y.ritp.Request.encode(t.request,e.uint32(18).fork()).ldelim(),null!=t.chunk&&Object.hasOwnProperty.call(t,"chunk")&&e.uint32(26).bytes(t.chunk),null!=t.end&&Object.hasOwnProperty.call(t,"end")&&y.ritp.End.encode(t.end,e.uint32(34).fork()).ldelim(),e},w.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},w.decode=function(t,e){t instanceof h||(t=h.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new y.ritp.Event;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.streamId=t.uint64();break;case 2:r.request=y.ritp.Request.decode(t,t.uint32());break;case 3:r.chunk=t.bytes();break;case 4:r.end=y.ritp.End.decode(t,t.uint32());break;default:t.skipType(7&o)}}return r},w.decodeDelimited=function(t){return t instanceof h||(t=new h(t)),this.decode(t,t.uint32())},w.verify=function(t){if("object"!=typeof t||null===t)return"object expected";var e,n={};if(null!=t.streamId&&t.hasOwnProperty("streamId")&&!(d.isInteger(t.streamId)||t.streamId&&d.isInteger(t.streamId.low)&&d.isInteger(t.streamId.high)))return"streamId: integer|Long expected";if(null!=t.request&&t.hasOwnProperty("request")&&(n.type=1,e=y.ritp.Request.verify(t.request)))return"request."+e;if(null!=t.chunk&&t.hasOwnProperty("chunk")){if(1===n.type)return"type: multiple values";if(n.type=1,!(t.chunk&&"number"==typeof t.chunk.length||d.isString(t.chunk)))return"chunk: buffer expected"}if(null!=t.end&&t.hasOwnProperty("end")){if(1===n.type)return"type: multiple values";if(n.type=1,e=y.ritp.End.verify(t.end))return"end."+e}return null},w.fromObject=function(t){if(t instanceof y.ritp.Event)return t;var e=new y.ritp.Event;if(null!=t.streamId&&(d.Long?(e.streamId=d.Long.fromValue(t.streamId)).unsigned=!0:"string"==typeof t.streamId?e.streamId=parseInt(t.streamId,10):"number"==typeof t.streamId?e.streamId=t.streamId:"object"==typeof t.streamId&&(e.streamId=new d.LongBits(t.streamId.low>>>0,t.streamId.high>>>0).toNumber(!0))),null!=t.request){if("object"!=typeof t.request)throw TypeError(".ritp.Event.request: object expected");e.request=y.ritp.Request.fromObject(t.request)}if(null!=t.chunk&&("string"==typeof t.chunk?d.base64.decode(t.chunk,e.chunk=d.newBuffer(d.base64.length(t.chunk)),0):t.chunk.length&&(e.chunk=t.chunk)),null!=t.end){if("object"!=typeof t.end)throw TypeError(".ritp.Event.end: object expected");e.end=y.ritp.End.fromObject(t.end)}return e},w.toObject=function(t,e){var n,r={};return(e=e||{}).defaults&&(d.Long?(n=new d.Long(0,0,!0),r.streamId=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.streamId=e.longs===String?"0":0),null!=t.streamId&&t.hasOwnProperty("streamId")&&("number"==typeof t.streamId?r.streamId=e.longs===String?String(t.streamId):t.streamId:r.streamId=e.longs===String?d.Long.prototype.toString.call(t.streamId):e.longs===Number?new d.LongBits(t.streamId.low>>>0,t.streamId.high>>>0).toNumber(!0):t.streamId),null!=t.request&&t.hasOwnProperty("request")&&(r.request=y.ritp.Request.toObject(t.request,e),e.oneofs&&(r.type="request")),null!=t.chunk&&t.hasOwnProperty("chunk")&&(r.chunk=e.bytes===String?d.base64.encode(t.chunk,0,t.chunk.length):e.bytes===Array?Array.prototype.slice.call(t.chunk):t.chunk,e.oneofs&&(r.type="chunk")),null!=t.end&&t.hasOwnProperty("end")&&(r.end=y.ritp.End.toObject(t.end,e),e.oneofs&&(r.type="end")),r},w.prototype.toJSON=function(){return this.constructor.toObject(this,f.util.toJSONOptions)},w),l.Request=(g.prototype.handlerName="",g.prototype.data=d.newBuffer([]),g.create=function(t){return new g(t)},g.encode=function(t,e){return e=e||p.create(),null!=t.handlerName&&Object.hasOwnProperty.call(t,"handlerName")&&e.uint32(10).string(t.handlerName),null!=t.data&&Object.hasOwnProperty.call(t,"data")&&e.uint32(18).bytes(t.data),e},g.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},g.decode=function(t,e){t instanceof h||(t=h.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new y.ritp.Request;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.handlerName=t.string();break;case 2:r.data=t.bytes();break;default:t.skipType(7&o)}}return r},g.decodeDelimited=function(t){return t instanceof h||(t=new h(t)),this.decode(t,t.uint32())},g.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.handlerName&&t.hasOwnProperty("handlerName")&&!d.isString(t.handlerName)?"handlerName: string expected":null!=t.data&&t.hasOwnProperty("data")&&!(t.data&&"number"==typeof t.data.length||d.isString(t.data))?"data: buffer expected":null},g.fromObject=function(t){if(t instanceof y.ritp.Request)return t;var e=new y.ritp.Request;return null!=t.handlerName&&(e.handlerName=String(t.handlerName)),null!=t.data&&("string"==typeof t.data?d.base64.decode(t.data,e.data=d.newBuffer(d.base64.length(t.data)),0):t.data.length&&(e.data=t.data)),e},g.toObject=function(t,e){var n={};return(e=e||{}).defaults&&(n.handlerName="",e.bytes===String?n.data="":(n.data=[],e.bytes!==Array&&(n.data=d.newBuffer(n.data)))),null!=t.handlerName&&t.hasOwnProperty("handlerName")&&(n.handlerName=t.handlerName),null!=t.data&&t.hasOwnProperty("data")&&(n.data=e.bytes===String?d.base64.encode(t.data,0,t.data.length):e.bytes===Array?Array.prototype.slice.call(t.data):t.data),n},g.prototype.toJSON=function(){return this.constructor.toObject(this,f.util.toJSONOptions)},g),l.End=(_.prototype.reason=0,_.prototype.detail="",_.create=function(t){return new _(t)},_.encode=function(t,e){return e=e||p.create(),null!=t.reason&&Object.hasOwnProperty.call(t,"reason")&&e.uint32(8).int32(t.reason),null!=t.detail&&Object.hasOwnProperty.call(t,"detail")&&e.uint32(18).string(t.detail),e},_.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},_.decode=function(t,e){t instanceof h||(t=h.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new y.ritp.End;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.reason=t.int32();break;case 2:r.detail=t.string();break;default:t.skipType(7&o)}}return r},_.decodeDelimited=function(t){return t instanceof h||(t=new h(t)),this.decode(t,t.uint32())},_.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.reason&&t.hasOwnProperty("reason"))switch(t.reason){default:return"reason: enum value expected";case 0:case 1:}return null!=t.detail&&t.hasOwnProperty("detail")&&!d.isString(t.detail)?"detail: string expected":null},_.fromObject=function(t){if(t instanceof y.ritp.End)return t;var e=new y.ritp.End;switch(t.reason){case"FINISH":case 0:e.reason=0;break;case"CANCEL":case 1:e.reason=1}return null!=t.detail&&(e.detail=String(t.detail)),e},_.toObject=function(t,e){var n={};return(e=e||{}).defaults&&(n.reason=e.enums===String?"FINISH":0,n.detail=""),null!=t.reason&&t.hasOwnProperty("reason")&&(n.reason=e.enums===String?y.ritp.End.Reason[t.reason]:t.reason),null!=t.detail&&t.hasOwnProperty("detail")&&(n.detail=t.detail),n},_.prototype.toJSON=function(){return this.constructor.toObject(this,f.util.toJSONOptions)},_.Reason=(i={},(s=Object.create(i))[i[0]="FINISH"]=0,s[i[1]="CANCEL"]=1,s),_),l.Control=(O.prototype.streamId=d.Long?d.Long.fromBits(0,0,!0):0,O.prototype.pull=0,O.prototype.close=null,Object.defineProperty(O.prototype,"type",{get:d.oneOfGetter(u=["pull","close"]),set:d.oneOfSetter(u)}),O.create=function(t){return new O(t)},O.encode=function(t,e){return e=e||p.create(),null!=t.streamId&&Object.hasOwnProperty.call(t,"streamId")&&e.uint32(8).uint64(t.streamId),null!=t.pull&&Object.hasOwnProperty.call(t,"pull")&&e.uint32(16).uint32(t.pull),null!=t.close&&Object.hasOwnProperty.call(t,"close")&&y.ritp.Close.encode(t.close,e.uint32(26).fork()).ldelim(),e},O.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},O.decode=function(t,e){t instanceof h||(t=h.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new y.ritp.Control;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.streamId=t.uint64();break;case 2:r.pull=t.uint32();break;case 3:r.close=y.ritp.Close.decode(t,t.uint32());break;default:t.skipType(7&o)}}return r},O.decodeDelimited=function(t){return t instanceof h||(t=new h(t)),this.decode(t,t.uint32())},O.verify=function(t){if("object"!=typeof t||null===t)return"object expected";var e={};if(null!=t.streamId&&t.hasOwnProperty("streamId")&&!(d.isInteger(t.streamId)||t.streamId&&d.isInteger(t.streamId.low)&&d.isInteger(t.streamId.high)))return"streamId: integer|Long expected";if(null!=t.pull&&t.hasOwnProperty("pull")&&(e.type=1,!d.isInteger(t.pull)))return"pull: integer expected";if(null!=t.close&&t.hasOwnProperty("close")){if(1===e.type)return"type: multiple values";e.type=1;var n=y.ritp.Close.verify(t.close);if(n)return"close."+n}return null},O.fromObject=function(t){if(t instanceof y.ritp.Control)return t;var e=new y.ritp.Control;if(null!=t.streamId&&(d.Long?(e.streamId=d.Long.fromValue(t.streamId)).unsigned=!0:"string"==typeof t.streamId?e.streamId=parseInt(t.streamId,10):"number"==typeof t.streamId?e.streamId=t.streamId:"object"==typeof t.streamId&&(e.streamId=new d.LongBits(t.streamId.low>>>0,t.streamId.high>>>0).toNumber(!0))),null!=t.pull&&(e.pull=t.pull>>>0),null!=t.close){if("object"!=typeof t.close)throw TypeError(".ritp.Control.close: object expected");e.close=y.ritp.Close.fromObject(t.close)}return e},O.toObject=function(t,e){var n,r={};return(e=e||{}).defaults&&(d.Long?(n=new d.Long(0,0,!0),r.streamId=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.streamId=e.longs===String?"0":0),null!=t.streamId&&t.hasOwnProperty("streamId")&&("number"==typeof t.streamId?r.streamId=e.longs===String?String(t.streamId):t.streamId:r.streamId=e.longs===String?d.Long.prototype.toString.call(t.streamId):e.longs===Number?new d.LongBits(t.streamId.low>>>0,t.streamId.high>>>0).toNumber(!0):t.streamId),null!=t.pull&&t.hasOwnProperty("pull")&&(r.pull=t.pull,e.oneofs&&(r.type="pull")),null!=t.close&&t.hasOwnProperty("close")&&(r.close=y.ritp.Close.toObject(t.close,e),e.oneofs&&(r.type="close")),r},O.prototype.toJSON=function(){return this.constructor.toObject(this,f.util.toJSONOptions)},O),l.Close=(x.prototype.reason=0,x.prototype.detail="",x.create=function(t){return new x(t)},x.encode=function(t,e){return e=e||p.create(),null!=t.reason&&Object.hasOwnProperty.call(t,"reason")&&e.uint32(8).int32(t.reason),null!=t.detail&&Object.hasOwnProperty.call(t,"detail")&&e.uint32(18).string(t.detail),e},x.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},x.decode=function(t,e){t instanceof h||(t=h.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new y.ritp.Close;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.reason=t.int32();break;case 2:r.detail=t.string();break;default:t.skipType(7&o)}}return r},x.decodeDelimited=function(t){return t instanceof h||(t=new h(t)),this.decode(t,t.uint32())},x.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.reason&&t.hasOwnProperty("reason"))switch(t.reason){default:return"reason: enum value expected";case 0:case 1:case 2:}return null!=t.detail&&t.hasOwnProperty("detail")&&!d.isString(t.detail)?"detail: string expected":null},x.fromObject=function(t){if(t instanceof y.ritp.Close)return t;var e=new y.ritp.Close;switch(t.reason){case"ABORT":case 0:e.reason=0;break;case"APPLICATION_ERROR":case 1:e.reason=1;break;case"PROTOCOL_ERROR":case 2:e.reason=2}return null!=t.detail&&(e.detail=String(t.detail)),e},x.toObject=function(t,e){var n={};return(e=e||{}).defaults&&(n.reason=e.enums===String?"ABORT":0,n.detail=""),null!=t.reason&&t.hasOwnProperty("reason")&&(n.reason=e.enums===String?y.ritp.Close.Reason[t.reason]:t.reason),null!=t.detail&&t.hasOwnProperty("detail")&&(n.detail=t.detail),n},x.prototype.toJSON=function(){return this.constructor.toObject(this,f.util.toJSONOptions)},x.Reason=(c={},(a=Object.create(c))[c[0]="ABORT"]=0,a[c[1]="APPLICATION_ERROR"]=1,a[c[2]="PROTOCOL_ERROR"]=2,a),x),l),t.exports=y},function(t,n,i){"use strict";(function(t){var r=n;function o(t,e,n){for(var r=Object.keys(e),o=0;o<r.length;++o)void 0!==t[r[o]]&&n||(t[r[o]]=e[r[o]]);return t}function e(t){function n(t,e){if(!(this instanceof n))return new n(t,e);Object.defineProperty(this,"message",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,n):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),e&&o(this,e)}return(n.prototype=Object.create(Error.prototype)).constructor=n,Object.defineProperty(n.prototype,"name",{get:function(){return t}}),n.prototype.toString=function(){return this.name+": "+this.message},n}r.asPromise=i(7),r.base64=i(8),r.EventEmitter=i(9),r.float=i(10),r.inquire=i(11),r.utf8=i(12),r.pool=i(13),r.LongBits=i(14),r.isNode=Boolean(void 0!==t&&t&&t.process&&t.process.versions&&t.process.versions.node),r.global=r.isNode&&t||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,r.emptyArray=Object.freeze?Object.freeze([]):[],r.emptyObject=Object.freeze?Object.freeze({}):{},r.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},r.isString=function(t){return"string"==typeof t||t instanceof String},r.isObject=function(t){return t&&"object"==typeof t},r.isset=r.isSet=function(t,e){var n=t[e];return!(null==n||!t.hasOwnProperty(e))&&("object"!=typeof n||0<(Array.isArray(n)?n.length:Object.keys(n).length))},r.Buffer=function(){try{var t=r.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch(t){return null}}(),r._Buffer_from=null,r._Buffer_allocUnsafe=null,r.newBuffer=function(t){return"number"==typeof t?r.Buffer?r._Buffer_allocUnsafe(t):new r.Array(t):r.Buffer?r._Buffer_from(t):"undefined"==typeof Uint8Array?t:new Uint8Array(t)},r.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,r.Long=r.global.dcodeIO&&r.global.dcodeIO.Long||r.global.Long||r.inquire("long"),r.key2Re=/^true|false|0|1$/,r.key32Re=/^-?(?:0|[1-9][0-9]*)$/,r.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,r.longToHash=function(t){return t?r.LongBits.from(t).toHash():r.LongBits.zeroHash},r.longFromHash=function(t,e){var n=r.LongBits.fromHash(t);return r.Long?r.Long.fromBits(n.lo,n.hi,e):n.toNumber(Boolean(e))},r.merge=o,r.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1)},r.newError=e,r.ProtocolError=e("ProtocolError"),r.oneOfGetter=function(t){for(var n={},e=0;e<t.length;++e)n[t[e]]=1;return function(){for(var t=Object.keys(this),e=t.length-1;-1<e;--e)if(1===n[t[e]]&&void 0!==this[t[e]]&&null!==this[t[e]])return t[e]}},r.oneOfSetter=function(n){return function(t){for(var e=0;e<n.length;++e)n[e]!==t&&delete this[n[e]]}},r.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},r._configure=function(){var n=r.Buffer;n?(r._Buffer_from=n.from!==Uint8Array.from&&n.from||function(t,e){return new n(t,e)},r._Buffer_allocUnsafe=n.allocUnsafe||function(t){return new n(t)}):r._Buffer_from=r._Buffer_allocUnsafe=null}}).call(this,i(6))},function(t,e,n){"use strict";t.exports=f;var r,o=n(1),i=o.LongBits,s=o.base64,u=o.utf8;function c(t,e,n){this.fn=t,this.len=e,this.next=void 0,this.val=n}function a(){}function l(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function f(){this.len=0,this.head=new c(a,0,0),this.tail=this.head,this.states=null}function h(){return o.Buffer?function(){return(f.create=function(){return new r})()}:function(){return new f}}function p(t,e,n){e[n]=255&t}function d(t,e){this.len=t,this.next=void 0,this.val=e}function y(t,e,n){for(;t.hi;)e[n++]=127&t.lo|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;127<t.lo;)e[n++]=127&t.lo|128,t.lo=t.lo>>>7;e[n++]=t.lo}function b(t,e,n){e[n]=255&t,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24}f.create=h(),f.alloc=function(t){return new o.Array(t)},o.Array!==Array&&(f.alloc=o.pool(f.alloc,o.Array.prototype.subarray)),f.prototype._push=function(t,e,n){return this.tail=this.tail.next=new c(t,e,n),this.len+=e,this},(d.prototype=Object.create(c.prototype)).fn=function(t,e,n){for(;127<t;)e[n++]=127&t|128,t>>>=7;e[n]=t},f.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new d((t>>>=0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this},f.prototype.int32=function(t){return t<0?this._push(y,10,i.fromNumber(t)):this.uint32(t)},f.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)},f.prototype.int64=f.prototype.uint64=function(t){var e=i.from(t);return this._push(y,e.length(),e)},f.prototype.sint64=function(t){var e=i.from(t).zzEncode();return this._push(y,e.length(),e)},f.prototype.bool=function(t){return this._push(p,1,t?1:0)},f.prototype.sfixed32=f.prototype.fixed32=function(t){return this._push(b,4,t>>>0)},f.prototype.sfixed64=f.prototype.fixed64=function(t){var e=i.from(t);return this._push(b,4,e.lo)._push(b,4,e.hi)},f.prototype.float=function(t){return this._push(o.float.writeFloatLE,4,t)},f.prototype.double=function(t){return this._push(o.float.writeDoubleLE,8,t)};var v=o.Array.prototype.set?function(t,e,n){e.set(t,n)}:function(t,e,n){for(var r=0;r<t.length;++r)e[n+r]=t[r]};f.prototype.bytes=function(t){var e,n=t.length>>>0;return n?(o.isString(t)&&(e=f.alloc(n=s.length(t)),s.decode(t,e,0),t=e),this.uint32(n)._push(v,n,t)):this._push(p,1,0)},f.prototype.string=function(t){var e=u.length(t);return e?this.uint32(e)._push(u.write,e,t):this._push(p,1,0)},f.prototype.fork=function(){return this.states=new l(this),this.head=this.tail=new c(a,0,0),this.len=0,this},f.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new c(a,0,0),this.len=0),this},f.prototype.ldelim=function(){var t=this.head,e=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=t.next,this.tail=e,this.len+=n),this},f.prototype.finish=function(){for(var t=this.head.next,e=this.constructor.alloc(this.len),n=0;t;)t.fn(t.val,e,n),n+=t.len,t=t.next;return e},f._configure=function(t){r=t,f.create=h(),r._configure()}},function(t,e,n){"use strict";t.exports=c;var r,o=n(1),i=o.LongBits,s=o.utf8;function u(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function c(t){this.buf=t,this.pos=0,this.len=t.length}function a(){return o.Buffer?function(t){return(c.create=function(t){return o.Buffer.isBuffer(t)?new r(t):f(t)})(t)}:f}var l,f="undefined"!=typeof Uint8Array?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new c(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new c(t);throw Error("illegal buffer")};function h(){var t=new i(0,0),e=0;if(!(4<this.len-this.pos)){for(;e<3;++e){if(this.pos>=this.len)throw u(this);if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(127&this.buf[this.pos++])<<7*e)>>>0,t}for(;e<4;++e)if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(127&this.buf[this.pos])<<28)>>>0,t.hi=(t.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return t;if(e=0,4<this.len-this.pos){for(;e<5;++e)if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw u(this);if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}function p(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}function d(){if(this.pos+8>this.len)throw u(this,8);return new i(p(this.buf,this.pos+=4),p(this.buf,this.pos+=4))}c.create=a(),c.prototype._slice=o.Array.prototype.subarray||o.Array.prototype.slice,c.prototype.uint32=(l=4294967295,function(){if(l=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return l;if((this.pos+=5)>this.len)throw this.pos=this.len,u(this,10);return l}),c.prototype.int32=function(){return 0|this.uint32()},c.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(1&t)|0},c.prototype.bool=function(){return 0!==this.uint32()},c.prototype.fixed32=function(){if(this.pos+4>this.len)throw u(this,4);return p(this.buf,this.pos+=4)},c.prototype.sfixed32=function(){if(this.pos+4>this.len)throw u(this,4);return 0|p(this.buf,this.pos+=4)},c.prototype.float=function(){if(this.pos+4>this.len)throw u(this,4);var t=o.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t},c.prototype.double=function(){if(this.pos+8>this.len)throw u(this,4);var t=o.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t},c.prototype.bytes=function(){var t=this.uint32(),e=this.pos,n=this.pos+t;if(n>this.len)throw u(this,t);return this.pos+=t,Array.isArray(this.buf)?this.buf.slice(e,n):e===n?new this.buf.constructor(0):this._slice.call(this.buf,e,n)},c.prototype.string=function(){var t=this.bytes();return s.read(t,0,t.length)},c.prototype.skip=function(t){if("number"==typeof t){if(this.pos+t>this.len)throw u(this,t);this.pos+=t}else do{if(this.pos>=this.len)throw u(this)}while(128&this.buf[this.pos++]);return this},c.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(t=7&this.uint32());)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this},c._configure=function(t){r=t,c.create=a(),r._configure();var e=o.Long?"toLong":"toNumber";o.merge(c.prototype,{int64:function(){return h.call(this)[e](!1)},uint64:function(){return h.call(this)[e](!0)},sint64:function(){return h.call(this).zzDecode()[e](!1)},fixed64:function(){return d.call(this)[e](!0)},sfixed64:function(){return d.call(this)[e](!1)}})}},function(t,e,n){"use strict";t.exports=n(5)},function(t,e,n){"use strict";var r=e;function o(){r.util._configure(),r.Writer._configure(r.BufferWriter),r.Reader._configure(r.BufferReader)}r.build="minimal",r.Writer=n(2),r.BufferWriter=n(15),r.Reader=n(3),r.BufferReader=n(16),r.util=n(1),r.rpc=n(17),r.roots=n(19),r.configure=o,o()},function(t,e){var n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";t.exports=function(t,e){var n=new Array(arguments.length-1),i=0,r=2,s=!0;for(;r<arguments.length;)n[i++]=arguments[r++];return new Promise(function(r,o){n[i]=function(t){if(s)if(s=!1,t)o(t);else{for(var e=new Array(arguments.length-1),n=0;n<e.length;)e[n++]=arguments[n];r.apply(null,e)}};try{t.apply(e||null,n)}catch(t){s&&(s=!1,o(t))}})}},function(t,e,n){"use strict";var r=e;r.length=function(t){var e=t.length;if(!e)return 0;for(var n=0;1<--e%4&&"="===t.charAt(e);)++n;return Math.ceil(3*t.length)/4-n};for(var a=new Array(64),c=new Array(123),o=0;o<64;)c[a[o]=o<26?o+65:o<52?o+71:o<62?o-4:o-59|43]=o++;r.encode=function(t,e,n){for(var r,o=null,i=[],s=0,u=0;e<n;){var c=t[e++];switch(u){case 0:i[s++]=a[c>>2],r=(3&c)<<4,u=1;break;case 1:i[s++]=a[r|c>>4],r=(15&c)<<2,u=2;break;case 2:i[s++]=a[r|c>>6],i[s++]=a[63&c],u=0}8191<s&&((o=o||[]).push(String.fromCharCode.apply(String,i)),s=0)}return u&&(i[s++]=a[r],i[s++]=61,1===u&&(i[s++]=61)),o?(s&&o.push(String.fromCharCode.apply(String,i.slice(0,s))),o.join("")):String.fromCharCode.apply(String,i.slice(0,s))};var l="invalid encoding";r.decode=function(t,e,n){for(var r,o=n,i=0,s=0;s<t.length;){var u=t.charCodeAt(s++);if(61===u&&1<i)break;if(void 0===(u=c[u]))throw Error(l);switch(i){case 0:r=u,i=1;break;case 1:e[n++]=r<<2|(48&u)>>4,r=u,i=2;break;case 2:e[n++]=(15&r)<<4|(60&u)>>2,r=u,i=3;break;case 3:e[n++]=(3&r)<<6|u,i=0}}if(1===i)throw Error(l);return n-o},r.test=function(t){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)}},function(t,e,n){"use strict";function r(){this._listeners={}}(t.exports=r).prototype.on=function(t,e,n){return(this._listeners[t]||(this._listeners[t]=[])).push({fn:e,ctx:n||this}),this},r.prototype.off=function(t,e){if(void 0===t)this._listeners={};else if(void 0===e)this._listeners[t]=[];else for(var n=this._listeners[t],r=0;r<n.length;)n[r].fn===e?n.splice(r,1):++r;return this},r.prototype.emit=function(t){var e=this._listeners[t];if(e){for(var n=[],r=1;r<arguments.length;)n.push(arguments[r++]);for(r=0;r<e.length;)e[r].fn.apply(e[r++].ctx,n)}return this}},function(t,e,n){"use strict";function r(t){function e(t,e,n,r){var o,i=e<0?1:0;i&&(e=-e),0===e?t(0<1/e?0:2147483648,n,r):isNaN(e)?t(2143289344,n,r):t(34028234663852886e22<e?(i<<31|2139095040)>>>0:e<11754943508222875e-54?(i<<31|Math.round(e/1401298464324817e-60))>>>0:(i<<31|(o=Math.floor(Math.log(e)/Math.LN2))+127<<23|8388607&Math.round(e*Math.pow(2,-o)*8388608))>>>0,n,r)}function n(t,e,n){var r=t(e,n),o=2*(r>>31)+1,i=r>>>23&255,s=8388607&r;return 255==i?s?NaN:1/0*o:0==i?1401298464324817e-60*o*s:o*Math.pow(2,i-150)*(8388608+s)}function r(t,e,n){u[0]=t,e[n]=c[0],e[n+1]=c[1],e[n+2]=c[2],e[n+3]=c[3]}function o(t,e,n){u[0]=t,e[n]=c[3],e[n+1]=c[2],e[n+2]=c[1],e[n+3]=c[0]}function i(t,e){return c[0]=t[e],c[1]=t[e+1],c[2]=t[e+2],c[3]=t[e+3],u[0]}function s(t,e){return c[3]=t[e],c[2]=t[e+1],c[1]=t[e+2],c[0]=t[e+3],u[0]}var u,c,a,l,f,h;function p(t,e,n,r,o,i){var s,u,c=r<0?1:0;c&&(r=-r),0===r?(t(0,o,i+e),t(0<1/r?0:2147483648,o,i+n)):isNaN(r)?(t(0,o,i+e),t(2146959360,o,i+n)):17976931348623157e292<r?(t(0,o,i+e),t((c<<31|2146435072)>>>0,o,i+n)):r<22250738585072014e-324?(t((s=r/5e-324)>>>0,o,i+e),t((c<<31|s/4294967296)>>>0,o,i+n)):(1024===(u=Math.floor(Math.log(r)/Math.LN2))&&(u=1023),t(4503599627370496*(s=r*Math.pow(2,-u))>>>0,o,i+e),t((c<<31|u+1023<<20|1048576*s&1048575)>>>0,o,i+n))}function d(t,e,n,r,o){var i=t(r,o+e),s=t(r,o+n),u=2*(s>>31)+1,c=s>>>20&2047,a=4294967296*(1048575&s)+i;return 2047==c?a?NaN:1/0*u:0==c?5e-324*u*a:u*Math.pow(2,c-1075)*(a+4503599627370496)}function y(t,e,n){l[0]=t,e[n]=f[0],e[n+1]=f[1],e[n+2]=f[2],e[n+3]=f[3],e[n+4]=f[4],e[n+5]=f[5],e[n+6]=f[6],e[n+7]=f[7]}function b(t,e,n){l[0]=t,e[n]=f[7],e[n+1]=f[6],e[n+2]=f[5],e[n+3]=f[4],e[n+4]=f[3],e[n+5]=f[2],e[n+6]=f[1],e[n+7]=f[0]}function v(t,e){return f[0]=t[e],f[1]=t[e+1],f[2]=t[e+2],f[3]=t[e+3],f[4]=t[e+4],f[5]=t[e+5],f[6]=t[e+6],f[7]=t[e+7],l[0]}function m(t,e){return f[7]=t[e],f[6]=t[e+1],f[5]=t[e+2],f[4]=t[e+3],f[3]=t[e+4],f[2]=t[e+5],f[1]=t[e+6],f[0]=t[e+7],l[0]}return"undefined"!=typeof Float32Array?(u=new Float32Array([-0]),c=new Uint8Array(u.buffer),a=128===c[3],t.writeFloatLE=a?r:o,t.writeFloatBE=a?o:r,t.readFloatLE=a?i:s,t.readFloatBE=a?s:i):(t.writeFloatLE=e.bind(null,w),t.writeFloatBE=e.bind(null,g),t.readFloatLE=n.bind(null,_),t.readFloatBE=n.bind(null,O)),"undefined"!=typeof Float64Array?(l=new Float64Array([-0]),f=new Uint8Array(l.buffer),h=128===f[7],t.writeDoubleLE=h?y:b,t.writeDoubleBE=h?b:y,t.readDoubleLE=h?v:m,t.readDoubleBE=h?m:v):(t.writeDoubleLE=p.bind(null,w,0,4),t.writeDoubleBE=p.bind(null,g,4,0),t.readDoubleLE=d.bind(null,_,0,4),t.readDoubleBE=d.bind(null,O,4,0)),t}function w(t,e,n){e[n]=255&t,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24}function g(t,e,n){e[n]=t>>>24,e[n+1]=t>>>16&255,e[n+2]=t>>>8&255,e[n+3]=255&t}function _(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function O(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}t.exports=r(r)},function(module,exports,__webpack_require__){"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(t){}return null}module.exports=inquire},function(t,e,n){"use strict";var r=e;r.length=function(t){for(var e,n=0,r=0;r<t.length;++r)(e=t.charCodeAt(r))<128?n+=1:e<2048?n+=2:55296==(64512&e)&&56320==(64512&t.charCodeAt(r+1))?(++r,n+=4):n+=3;return n},r.read=function(t,e,n){if(n-e<1)return"";for(var r,o=null,i=[],s=0;e<n;)(r=t[e++])<128?i[s++]=r:191<r&&r<224?i[s++]=(31&r)<<6|63&t[e++]:239<r&&r<365?(r=((7&r)<<18|(63&t[e++])<<12|(63&t[e++])<<6|63&t[e++])-65536,i[s++]=55296+(r>>10),i[s++]=56320+(1023&r)):i[s++]=(15&r)<<12|(63&t[e++])<<6|63&t[e++],8191<s&&((o=o||[]).push(String.fromCharCode.apply(String,i)),s=0);return o?(s&&o.push(String.fromCharCode.apply(String,i.slice(0,s))),o.join("")):String.fromCharCode.apply(String,i.slice(0,s))},r.write=function(t,e,n){for(var r,o,i=n,s=0;s<t.length;++s)(r=t.charCodeAt(s))<128?e[n++]=r:(r<2048?e[n++]=r>>6|192:(55296==(64512&r)&&56320==(64512&(o=t.charCodeAt(s+1)))?(r=65536+((1023&r)<<10)+(1023&o),++s,e[n++]=r>>18|240,e[n++]=r>>12&63|128):e[n++]=r>>12|224,e[n++]=r>>6&63|128),e[n++]=63&r|128);return n-i}},function(t,e,n){"use strict";t.exports=function(n,r,t){var o=t||8192,i=o>>>1,s=null,u=o;return function(t){if(t<1||i<t)return n(t);o<u+t&&(s=n(o),u=0);var e=r.call(s,u,u+=t);return 7&u&&(u=1+(7|u)),e}}},function(t,e,n){"use strict";t.exports=o;var r=n(1);function o(t,e){this.lo=t>>>0,this.hi=e>>>0}var i=o.zero=new o(0,0);i.toNumber=function(){return 0},i.zzEncode=i.zzDecode=function(){return this},i.length=function(){return 1};o.zeroHash="\0\0\0\0\0\0\0\0";o.fromNumber=function(t){if(0===t)return i;var e=t<0;e&&(t=-t);var n=t>>>0,r=(t-n)/4294967296>>>0;return e&&(r=~r>>>0,n=~n>>>0,4294967295<++n&&(n=0,4294967295<++r&&(r=0))),new o(n,r)},o.from=function(t){if("number"==typeof t)return o.fromNumber(t);if(r.isString(t)){if(!r.Long)return o.fromNumber(parseInt(t,10));t=r.Long.fromString(t)}return t.low||t.high?new o(t.low>>>0,t.high>>>0):i},o.prototype.toNumber=function(t){if(!t&&this.hi>>>31){var e=1+~this.lo>>>0,n=~this.hi>>>0;return e||(n=n+1>>>0),-(e+4294967296*n)}return this.lo+4294967296*this.hi},o.prototype.toLong=function(t){return r.Long?new r.Long(0|this.lo,0|this.hi,Boolean(t)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(t)}};var s=String.prototype.charCodeAt;o.fromHash=function(t){return"\0\0\0\0\0\0\0\0"===t?i:new o((s.call(t,0)|s.call(t,1)<<8|s.call(t,2)<<16|s.call(t,3)<<24)>>>0,(s.call(t,4)|s.call(t,5)<<8|s.call(t,6)<<16|s.call(t,7)<<24)>>>0)},o.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},o.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this},o.prototype.zzDecode=function(){var t=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this},o.prototype.length=function(){var t=this.lo,e=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0==n?0==e?t<16384?t<128?1:2:t<2097152?3:4:e<16384?e<128?5:6:e<2097152?7:8:n<128?9:10}},function(t,e,n){"use strict";t.exports=i;var r=n(2);(i.prototype=Object.create(r.prototype)).constructor=i;var o=n(1);function i(){r.call(this)}function s(t,e,n){t.length<40?o.utf8.write(t,e,n):e.utf8Write?e.utf8Write(t,n):e.write(t,n)}i._configure=function(){i.alloc=o._Buffer_allocUnsafe,i.writeBytesBuffer=o.Buffer&&o.Buffer.prototype instanceof Uint8Array&&"set"===o.Buffer.prototype.set.name?function(t,e,n){e.set(t,n)}:function(t,e,n){if(t.copy)t.copy(e,n,0,t.length);else for(var r=0;r<t.length;)e[n++]=t[r++]}},i.prototype.bytes=function(t){o.isString(t)&&(t=o._Buffer_from(t,"base64"));var e=t.length>>>0;return this.uint32(e),e&&this._push(i.writeBytesBuffer,e,t),this},i.prototype.string=function(t){var e=o.Buffer.byteLength(t);return this.uint32(e),e&&this._push(s,e,t),this},i._configure()},function(t,e,n){"use strict";t.exports=i;var r=n(3);(i.prototype=Object.create(r.prototype)).constructor=i;var o=n(1);function i(t){r.call(this,t)}i._configure=function(){o.Buffer&&(i.prototype._slice=o.Buffer.prototype.slice)},i.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+t,this.len))},i._configure()},function(t,e,n){"use strict";e.Service=n(18)},function(t,e,n){"use strict";t.exports=r;var u=n(1);function r(t,e,n){if("function"!=typeof t)throw TypeError("rpcImpl must be a function");u.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(n)}((r.prototype=Object.create(u.EventEmitter.prototype)).constructor=r).prototype.rpcCall=function t(n,e,r,o,i){if(!o)throw TypeError("request must be specified");var s=this;if(!i)return u.asPromise(t,s,n,e,r,o);if(s.rpcImpl)try{return s.rpcImpl(n,e[s.requestDelimited?"encodeDelimited":"encode"](o).finish(),function(t,e){if(t)return s.emit("error",t,n),i(t);if(null!==e){if(!(e instanceof r))try{e=r[s.responseDelimited?"decodeDelimited":"decode"](e)}catch(t){return s.emit("error",t,n),i(t)}return s.emit("data",e,n),i(null,e)}s.end(!0)})}catch(t){return s.emit("error",t,n),void setTimeout(function(){i(t)},0)}else setTimeout(function(){i(Error("already ended"))},0)},r.prototype.end=function(t){return this.rpcImpl&&(t||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},function(t,e,n){"use strict";t.exports={}},function(t,e,n){"use strict";n.r(e),n.d(e,"createH5WebSocket",function(){return fe}),n.d(e,"init",function(){return he});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function c(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function a(t){return"function"==typeof t}var o=!1,i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack,o=t},get useDeprecatedSynchronousErrorHandling(){return o}};function s(t){setTimeout(function(){throw t},0)}var l={closed:!0,next:function(t){},error:function(t){if(i.useDeprecatedSynchronousErrorHandling)throw t;s(t)},complete:function(){}},f=function(){return Array.isArray||function(t){return t&&"number"==typeof t.length}}();function h(t){return null!==t&&"object"==typeof t}var p=function(){function t(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t}(),d=function(){function u(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var t;return u.prototype.unsubscribe=function(){var e;if(!this.closed){var t=this._parentOrParents,n=this._unsubscribe,r=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,t instanceof u)t.remove(this);else if(null!==t)for(var o=0;o<t.length;++o){t[o].remove(this)}if(a(n))try{n.call(this)}catch(t){e=t instanceof p?y(t.errors):[t]}if(f(r))for(var o=-1,i=r.length;++o<i;){var s=r[o];if(h(s))try{s.unsubscribe()}catch(t){e=e||[],t instanceof p?e=e.concat(y(t.errors)):e.push(t)}}if(e)throw new p(e)}},u.prototype.add=function(t){var e,n=t;if(!t)return u.EMPTY;switch(typeof t){case"function":n=new u(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;n instanceof u||(e=n,(n=new u)._subscriptions=[e]);break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var r=n._parentOrParents;if(null===r)n._parentOrParents=this;else if(r instanceof u){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[n]:o.push(n),n},u.prototype.remove=function(t){var e,n=this._subscriptions;!n||-1!==(e=n.indexOf(t))&&n.splice(e,1)},u.EMPTY=((t=new u).closed=!0,t),u}();function y(t){return t.reduce(function(t,e){return t.concat(e instanceof p?e.errors:e)},[])}var u=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),b=function(o){function i(t,e,n){var r=o.call(this)||this;switch(r.syncErrorValue=null,r.syncErrorThrown=!1,r.syncErrorThrowable=!1,r.isStopped=!1,arguments.length){case 0:r.destination=l;break;case 1:if(!t){r.destination=l;break}if("object"==typeof t){t instanceof i?(r.syncErrorThrowable=t.syncErrorThrowable,(r.destination=t).add(r)):(r.syncErrorThrowable=!0,r.destination=new v(r,t));break}default:r.syncErrorThrowable=!0,r.destination=new v(r,t,e,n)}return r}return c(i,o),i.prototype[u]=function(){return this},i.create=function(t,e,n){var r=new i(t,e,n);return r.syncErrorThrowable=!1,r},i.prototype.next=function(t){this.isStopped||this._next(t)},i.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},i.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},i.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,o.prototype.unsubscribe.call(this))},i.prototype._next=function(t){this.destination.next(t)},i.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},i.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},i.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this},i}(d),v=function(u){function t(t,e,n,r){var o,i=u.call(this)||this;i._parentSubscriber=t;var s=i;return a(e)?o=e:e&&(o=e.next,n=e.error,r=e.complete,e!==l&&(a((s=Object.create(e)).unsubscribe)&&i.add(s.unsubscribe.bind(s)),s.unsubscribe=i.unsubscribe.bind(i))),i._context=s,i._next=o,i._error=n,i._complete=r,i}return c(t,u),t.prototype.next=function(t){var e;!this.isStopped&&this._next&&(e=this._parentSubscriber,i.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t))},t.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,n=i.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?this.__tryOrSetError(e,this._error,t):this.__tryOrUnsub(this._error,t),this.unsubscribe();else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):s(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;s(t)}}},t.prototype.complete=function(){var t,e,n=this;this.isStopped||(t=this._parentSubscriber,this._complete&&(e=function(){return n._complete.call(n._context)},i.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,e):this.__tryOrUnsub(e)),this.unsubscribe())},t.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),i.useDeprecatedSynchronousErrorHandling)throw t;s(t)}},t.prototype.__tryOrSetError=function(e,t,n){if(!i.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(t){return i.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0):(s(t),!0)}return!1},t.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},t}(b);var m=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function w(t){return t}function g(e){return 0===e.length?w:1===e.length?e[0]:function(t){return e.reduce(function(t,e){return e(t)},t)}}var _=function(){function n(t){this._isScalar=!1,t&&(this._subscribe=t)}return n.prototype.lift=function(t){var e=new n;return e.source=this,e.operator=t,e},n.prototype.subscribe=function(t,e,n){var r=this.operator,o=function(t,e,n){if(t){if(t instanceof b)return t;if(t[u])return t[u]()}return t||e||n?new b(t,e,n):new b(l)}(t,e,n);if(r?o.add(r.call(o,this.source)):o.add(this.source||i.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),i.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},n.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){i.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),!function(t){for(;t;){var e=t.closed,n=t.destination,r=t.isStopped;if(e||r)return;t=n&&n instanceof b?n:null}return 1}(e)?console.warn(t):e.error(t)}},n.prototype.forEach=function(r,t){var o=this;return new(t=O(t))(function(t,e){var n=o.subscribe(function(t){try{r(t)}catch(t){e(t),n&&n.unsubscribe()}},e,t)})},n.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},n.prototype[m]=function(){return this},n.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:g(t)(this)},n.prototype.toPromise=function(t){var r=this;return new(t=O(t))(function(t,e){var n;r.subscribe(function(t){return n=t},function(t){return e(t)},function(){return t(n)})})},n.create=function(t){return new n(t)},n}();function O(t){if(!(t=t||(i.Promise||Promise)))throw new Error("no Promise impl found");return t}function x(t){return t&&"function"==typeof t.schedule}var S=function(r){return function(t){for(var e=0,n=r.length;e<n&&!t.closed;e++)t.next(r[e]);t.complete()}};function I(r,o){return new _(function(t){var e=new d,n=0;return e.add(o.schedule(function(){n!==r.length?(t.next(r[n++]),t.closed||e.add(this.schedule())):t.complete()})),e})}function E(t,e){return e?I(t,e):new _(S(t))}function j(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[t.length-1];return x(n)?(t.pop(),I(t,n)):E(t)}var k=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e.prototype.notifyNext=function(t,e,n,r,o){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(b),N=function(o){function t(t,e,n){var r=o.call(this)||this;return r.parent=t,r.outerValue=e,r.outerIndex=n,r.index=0,r}return c(t,o),t.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},t.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(b);function P(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var C=P(),A=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t};function T(t){return t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}var B=function(t){if(t&&"function"==typeof t[m])return o=t,function(t){var e=o[m]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(A(t))return S(t);if(T(t))return n=t,function(e){return n.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,s),e};if(t&&"function"==typeof t[C])return r=t,function(e){for(var t=r[C]();;){var n=void 0;try{n=t.next()}catch(t){return e.error(t),e}if(n.done){e.complete();break}if(e.next(n.value),e.closed)break}return"function"==typeof t.return&&e.add(function(){t.return&&t.return()}),e};var r,n,o,e=h(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function L(t,e,n,r,o){if(void 0===o&&(o=new N(t,n,r)),!o.closed)return e instanceof _?e.subscribe(o):B(e)(o)}var R={};function D(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=null,r=null;return x(t[t.length-1])&&(r=t.pop()),"function"==typeof t[t.length-1]&&(n=t.pop()),1===t.length&&f(t[0])&&(t=t[0]),E(t,r).lift(new F(n))}var F=function(){function t(t){this.resultSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new q(t,this.resultSelector))},t}(),q=function(r){function t(t,e){var n=r.call(this,t)||this;return n.resultSelector=e,n.active=0,n.values=[],n.observables=[],n}return c(t,r),t.prototype._next=function(t){this.values.push(R),this.observables.push(t)},t.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(var n=0;n<e;n++){var r=t[n];this.add(L(this,r,r,n))}}},t.prototype.notifyComplete=function(t){0==--this.active&&this.destination.complete()},t.prototype.notifyNext=function(t,e,n,r,o){var i=this.values,s=i[n],u=this.toRespond?s===R?--this.toRespond:this.toRespond:0;i[n]=e,0===u&&(this.resultSelector?this._tryResultSelector(i):this.destination.next(i.slice()))},t.prototype._tryResultSelector=function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},t}(k);function M(e,n){return new _(n?function(t){return n.schedule(V,0,{error:e,subscriber:t})}:function(t){return t.error(e)})}function V(t){var e=t.error;t.subscriber.error(e)}var z=function(){function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t}(),H=function(r){function t(t,e){var n=r.call(this)||this;return n.subject=t,n.subscriber=e,n.closed=!1,n}return c(t,r),t.prototype.unsubscribe=function(){var t,e,n;this.closed||(this.closed=!0,e=(t=this.subject).observers,this.subject=null,!e||0===e.length||t.isStopped||t.closed||-1!==(n=e.indexOf(this.subscriber))&&e.splice(n,1))},t}(d),U=function(n){function t(t){var e=n.call(this,t)||this;return e.destination=t,e}return c(t,n),t}(b),J=function(e){function t(){var t=e.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return c(t,e),t.prototype[u]=function(){return new U(this)},t.prototype.lift=function(t){var e=new Y(this,this);return e.operator=t,e},t.prototype.next=function(t){if(this.closed)throw new z;if(!this.isStopped)for(var e=this.observers,n=e.length,r=e.slice(),o=0;o<n;o++)r[o].next(t)},t.prototype.error=function(t){if(this.closed)throw new z;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,r=e.slice(),o=0;o<n;o++)r[o].error(t);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new z;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),r=0;r<e;r++)n[r].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new z;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(t){if(this.closed)throw new z;return this.hasError?(t.error(this.thrownError),d.EMPTY):this.isStopped?(t.complete(),d.EMPTY):(this.observers.push(t),new H(this,t))},t.prototype.asObservable=function(){var t=new _;return t.source=this,t},t.create=function(t,e){return new Y(t,e)},t}(_),Y=function(r){function t(t,e){var n=r.call(this)||this;return n.destination=t,n.source=e,n}return c(t,r),t.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},t.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},t.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},t.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):d.EMPTY},t}(J),W=function(n){function t(t){var e=n.call(this)||this;return e._value=t,e}return c(t,n),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(t){var e=n.prototype._subscribe.call(this,t);return e&&!e.closed&&t.next(this._value),e},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new z;return this._value},t.prototype.next=function(t){n.prototype.next.call(this,this._value=t)},t}(J);function G(e,n){return function(t){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return t.lift(new $(e,n))}}var $=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new Z(t,this.project,this.thisArg))},t}(),Z=function(o){function t(t,e,n){var r=o.call(this,t)||this;return r.project=e,r.count=0,r.thisArg=n||r,r}return c(t,o),t.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},t}(b);function K(t,e){if(null!=t){if((u=t)&&"function"==typeof u[m])return i=t,s=e,new _(function(e){var n=new d;return n.add(s.schedule(function(){var t=i[m]();n.add(t.subscribe({next:function(t){n.add(s.schedule(function(){return e.next(t)}))},error:function(t){n.add(s.schedule(function(){return e.error(t)}))},complete:function(){n.add(s.schedule(function(){return e.complete()}))}}))})),n});if(T(t))return r=t,o=e,new _(function(e){var n=new d;return n.add(o.schedule(function(){return r.then(function(t){n.add(o.schedule(function(){e.next(t),n.add(o.schedule(function(){return e.complete()}))}))},function(t){n.add(o.schedule(function(){return e.error(t)}))})})),n});if(A(t))return I(t,e);if((n=t)&&"function"==typeof n[C]||"string"==typeof t)return function(e,n){if(!e)throw new Error("Iterable cannot be null");return new _(function(r){var o,t=new d;return t.add(function(){o&&"function"==typeof o.return&&o.return()}),t.add(n.schedule(function(){o=e[C](),t.add(n.schedule(function(){if(!r.closed){try{var t=o.next(),e=t.value,n=t.done}catch(t){return void r.error(t)}n?r.complete():(r.next(e),this.schedule())}}))})),t})}(t,e)}var n,r,o,i,s,u;throw new TypeError((null!==t&&typeof t||t)+" is not observable")}function Q(o,i,e){return void 0===e&&(e=Number.POSITIVE_INFINITY),"function"==typeof i?function(t){return t.pipe(Q(function(n,r){return t=o(n,r),(e?K(t,e):t instanceof _?t:new _(B(t))).pipe(G(function(t,e){return i(n,t,r,e)}));var t,e},e))}:("number"==typeof i&&(e=i),function(t){return t.lift(new X(o,e))})}var X=function(){function t(t,e){void 0===e&&(e=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=e}return t.prototype.call=function(t,e){return e.subscribe(new tt(t,this.project,this.concurrent))},t}(),tt=function(o){function t(t,e,n){void 0===n&&(n=Number.POSITIVE_INFINITY);var r=o.call(this,t)||this;return r.project=e,r.concurrent=n,r.hasCompleted=!1,r.buffer=[],r.active=0,r.index=0,r}return c(t,o),t.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},t.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e,t,n)},t.prototype._innerSub=function(t,e,n){var r=new N(this,e,n),o=this.destination;o.add(r);var i=L(this,t,void 0,void 0,r);i!==r&&o.add(i)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(t,e,n,r,o){this.destination.next(e)},t.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,0<e.length?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(k),et=Q;function nt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n,r=Number.POSITIVE_INFINITY,o=null,i=t[t.length-1];return x(i)?(o=t.pop(),1<t.length&&"number"==typeof t[t.length-1]&&(r=t.pop())):"number"==typeof i&&(r=t.pop()),null===o&&1===t.length&&t[0]instanceof _?t[0]:(void 0===(n=r)&&(n=Number.POSITIVE_INFINITY),Q(w,n)(E(t,o)))}function rt(){return function(t){return t.lift(new ot(t))}}var ot=function(){function t(t){this.connectable=t}return t.prototype.call=function(t,e){var n=this.connectable;n._refCount++;var r=new it(t,n),o=e.subscribe(r);return r.closed||(r.connection=n.connect()),o},t}(),it=function(r){function t(t,e){var n=r.call(this,t)||this;return n.connectable=e,n}return c(t,r),t.prototype._unsubscribe=function(){var t,e,n,r=this.connectable;r?(this.connectable=null,(t=r._refCount)<=0?this.connection=null:(r._refCount=t-1,1<t?this.connection=null:(e=this.connection,n=r._connection,this.connection=null,!n||e&&n!==e||n.unsubscribe()))):this.connection=null},t}(b),st=function(r){function t(t,e){var n=r.call(this)||this;return n.source=t,n.subjectFactory=e,n._refCount=0,n._isComplete=!1,n}return c(t,r),t.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},t.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new d).add(this.source.subscribe(new ct(this.getSubject(),this))),t.closed&&(this._connection=null,t=d.EMPTY)),t},t.prototype.refCount=function(){return rt()(this)},t}(_),ut=function(){var t=st.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}}(),ct=function(r){function t(t,e){var n=r.call(this,t)||this;return n.connectable=e,n}return c(t,r),t.prototype._error=function(t){this._unsubscribe(),r.prototype._error.call(this,t)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),r.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var t,e=this.connectable;e&&(this.connectable=null,t=e._connection,e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe())},t}(U);var at=function(){function t(t,e){this.subjectFactory=t,this.selector=e}return t.prototype.call=function(t,e){var n=this.selector,r=this.subjectFactory(),o=n(r).subscribe(t);return o.add(e.subscribe(r)),o},t}();function lt(){return new J}function ft(){return function(t){return rt()((r=lt,function(t){var e="function"==typeof r?r:function(){return r};if("function"==typeof o)return t.lift(new at(e,o));var n=Object.create(t,ut);return n.source=t,n.subjectFactory=e,n}(t)));var r,o}}function ht(){}function pt(e,n,r){return function(t){return t.lift(new dt(e,n,r))}}var dt=function(){function t(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}return t.prototype.call=function(t,e){return e.subscribe(new yt(t,this.nextOrObserver,this.error,this.complete))},t}(),yt=function(i){function t(t,e,n,r){var o=i.call(this,t)||this;return o._tapNext=ht,o._tapError=ht,o._tapComplete=ht,o._tapError=n||ht,o._tapComplete=r||ht,a(e)?(o._context=o)._tapNext=e:e&&(o._context=e,o._tapNext=e.next||ht,o._tapError=e.error||ht,o._tapComplete=e.complete||ht),o}return c(t,i),t.prototype._next=function(t){try{this._tapNext.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.next(t)},t.prototype._error=function(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)},t.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()},t}(b),bt=function(){function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t}(),vt=new _(function(t){return t.complete()});function mt(t){return t?(e=t,new _(function(t){return e.schedule(function(){return t.complete()})})):vt;var e}function wt(e){return function(t){return 0===e?mt():t.lift(new gt(e))}}var gt=function(){function t(t){if(this.total=t,this.total<0)throw new bt}return t.prototype.call=function(t,e){return e.subscribe(new _t(t,this.total))},t}(),_t=function(r){function t(t,e){var n=r.call(this,t)||this;return n.total=e,n.count=0,n}return c(t,r),t.prototype._next=function(t){var e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))},t}(b),Ot=function(r){function t(t,e){var n=r.call(this,t,e)||this;return n.scheduler=t,n.work=e,n}return c(t,r),t.prototype.schedule=function(t,e){return void 0===e&&(e=0),0<e?r.prototype.schedule.call(this,t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,e){return 0<e||this.closed?r.prototype.execute.call(this,t,e):this._execute(t,e)},t.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),null!==n&&0<n||null===n&&0<this.delay?r.prototype.requestAsyncId.call(this,t,e,n):t.flush(this)},t}(function(r){function t(t,e){var n=r.call(this,t,e)||this;return n.scheduler=t,n.work=e,n.pending=!1,n}return c(t,r),t.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this},t.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),setInterval(t.flush.bind(t,this),n)},t.prototype.recycleAsyncId=function(t,e,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)},t.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(t,e){var n=!1,r=void 0;try{this.work(t)}catch(t){n=!0,r=!!t&&t||new Error(t)}if(n)return this.unsubscribe(),r},t.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},t}(function(n){function t(t,e){return n.call(this)||this}return c(t,n),t.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},t}(d))),xt=function(){function n(t,e){void 0===e&&(e=n.now),this.SchedulerAction=t,this.now=e}return n.prototype.schedule=function(t,e,n){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(n,e)},n.now=function(){return Date.now()},n}(),St=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e}(function(r){function o(t,e){void 0===e&&(e=xt.now);var n=r.call(this,t,function(){return o.delegate&&o.delegate!==n?o.delegate.now():e()})||this;return n.actions=[],n.active=!1,n.scheduled=void 0,n}return c(o,r),o.prototype.schedule=function(t,e,n){return void 0===e&&(e=0),o.delegate&&o.delegate!==this?o.delegate.schedule(t,e,n):r.prototype.schedule.call(this,t,e,n)},o.prototype.flush=function(t){var e,n=this.actions;if(this.active)n.push(t);else{this.active=!0;do{if(e=t.execute(t.state,t.delay))break}while(t=n.shift());if(this.active=!1,e){for(;t=n.shift();)t.unsubscribe();throw e}}},o}(xt)))(Ot),It=function(){function e(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}return e.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},e.prototype.do=function(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}},e.prototype.accept=function(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)},e.prototype.toObservable=function(){switch(this.kind){case"N":return j(this.value);case"E":return M(this.error);case"C":return mt()}throw new Error("unexpected notification kind value")},e.createNext=function(t){return void 0!==t?new e("N",t):e.undefinedValueNotification},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e}();var Et=function(o){function e(t,e,n){void 0===n&&(n=0);var r=o.call(this,t)||this;return r.scheduler=e,r.delay=n,r}return c(e,o),e.dispatch=function(t){var e=t.notification,n=t.destination;e.observe(n),this.unsubscribe()},e.prototype.scheduleMessage=function(t){this.destination.add(this.scheduler.schedule(e.dispatch,this.delay,new jt(t,this.destination)))},e.prototype._next=function(t){this.scheduleMessage(It.createNext(t))},e.prototype._error=function(t){this.scheduleMessage(It.createError(t)),this.unsubscribe()},e.prototype._complete=function(){this.scheduleMessage(It.createComplete()),this.unsubscribe()},e}(b),jt=function(){return function(t,e){this.notification=t,this.destination=e}}(),kt=function(o){function t(t,e,n){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===e&&(e=Number.POSITIVE_INFINITY);var r=o.call(this)||this;return r.scheduler=n,r._events=[],r._infiniteTimeWindow=!1,r._bufferSize=t<1?1:t,r._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(r._infiniteTimeWindow=!0,r.next=r.nextInfiniteTimeWindow):r.next=r.nextTimeWindow,r}return c(t,o),t.prototype.nextInfiniteTimeWindow=function(t){var e=this._events;e.push(t),e.length>this._bufferSize&&e.shift(),o.prototype.next.call(this,t)},t.prototype.nextTimeWindow=function(t){this._events.push(new Nt(this._getNow(),t)),this._trimBufferThenGetEvents(),o.prototype.next.call(this,t)},t.prototype._subscribe=function(t){var e,n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),o=this.scheduler,i=r.length;if(this.closed)throw new z;if(e=this.isStopped||this.hasError?d.EMPTY:(this.observers.push(t),new H(this,t)),o&&t.add(t=new Et(t,o)),n)for(var s=0;s<i&&!t.closed;s++)t.next(r[s]);else for(s=0;s<i&&!t.closed;s++)t.next(r[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),e},t.prototype._getNow=function(){return(this.scheduler||St).now()},t.prototype._trimBufferThenGetEvents=function(){for(var t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,o=r.length,i=0;i<o&&!(t-r[i].time<n);)i++;return e<o&&(i=Math.max(i,o-e)),0<i&&r.splice(0,i),r},t}(J),Nt=function(){return function(t,e){this.time=t,this.value=e}}();function Pt(t,e,n){var p=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n};return function(t){return t.lift((o=(e=p).bufferSize,i=void 0===o?Number.POSITIVE_INFINITY:o,s=e.windowTime,u=void 0===s?Number.POSITIVE_INFINITY:s,c=e.refCount,a=e.scheduler,l=0,h=f=!1,function(t){var e;l++,!n||f?(f=!1,n=new kt(i,u,a),e=n.subscribe(this),r=t.subscribe({next:function(t){n.next(t)},error:function(t){f=!0,n.error(t)},complete:function(){h=!0,r=void 0,n.complete()}})):e=n.subscribe(this),this.add(function(){l--,e.unsubscribe(),r&&!h&&c&&0===l&&(r.unsubscribe(),n=r=void 0)})}));var e,n,r,o,i,s,u,c,a,l,f,h}}var Ct=function(){function t(t){this.total=t}return t.prototype.call=function(t,e){return e.subscribe(new At(t,this.total))},t}(),At=function(r){function t(t,e){var n=r.call(this,t)||this;return n.total=e,n.count=0,n}return c(t,r),t.prototype._next=function(t){++this.count>this.total&&this.destination.next(t)},t}(b);function Tt(e,n,r,o){return function(t){return t.lift(new Bt(e,n,r,o))}}var Bt=function(){function t(t,e,n,r){this.keySelector=t,this.elementSelector=e,this.durationSelector=n,this.subjectSelector=r}return t.prototype.call=function(t,e){return e.subscribe(new Lt(t,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))},t}(),Lt=function(s){function t(t,e,n,r,o){var i=s.call(this,t)||this;return i.keySelector=e,i.elementSelector=n,i.durationSelector=r,i.subjectSelector=o,i.groups=null,i.attemptedToUnsubscribe=!1,i.count=0,i}return c(t,s),t.prototype._next=function(t){var e;try{e=this.keySelector(t)}catch(t){return void this.error(t)}this._group(t,e)},t.prototype._group=function(t,e){var n,r=this.groups,o=(r=r||(this.groups=new Map)).get(e);if(this.elementSelector)try{n=this.elementSelector(t)}catch(t){this.error(t)}else n=t;if(!o){o=this.subjectSelector?this.subjectSelector():new J,r.set(e,o);var i=new Dt(e,o,this);if(this.destination.next(i),this.durationSelector){var s=void 0;try{s=this.durationSelector(new Dt(e,o))}catch(t){return void this.error(t)}this.add(s.subscribe(new Rt(e,o,this)))}}o.closed||o.next(n)},t.prototype._error=function(n){var t=this.groups;t&&(t.forEach(function(t,e){t.error(n)}),t.clear()),this.destination.error(n)},t.prototype._complete=function(){var t=this.groups;t&&(t.forEach(function(t,e){t.complete()}),t.clear()),this.destination.complete()},t.prototype.removeGroup=function(t){this.groups.delete(t)},t.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&s.prototype.unsubscribe.call(this))},t}(b),Rt=function(o){function t(t,e,n){var r=o.call(this,e)||this;return r.key=t,r.group=e,r.parent=n,r}return c(t,o),t.prototype._next=function(t){this.complete()},t.prototype._unsubscribe=function(){var t=this.parent,e=this.key;this.key=this.parent=null,t&&t.removeGroup(e)},t}(b),Dt=function(o){function t(t,e,n){var r=o.call(this)||this;return r.key=t,r.groupSubject=e,r.refCountSubscription=n,r}return c(t,o),t.prototype._subscribe=function(t){var e=new d,n=this.refCountSubscription,r=this.groupSubject;return n&&!n.closed&&e.add(new Ft(n)),e.add(r.subscribe(t)),e},t}(_),Ft=function(n){function t(t){var e=n.call(this)||this;return(e.parent=t).count++,e}return c(t,n),t.prototype.unsubscribe=function(){var t=this.parent;t.closed||this.closed||(n.prototype.unsubscribe.call(this),--t.count,0===t.count&&t.attemptedToUnsubscribe&&t.unsubscribe())},t}(d);function qt(e,n){if("function"!=typeof e)throw new TypeError("predicate is not a function");return function(t){return t.lift(new Mt(e,t,!1,n))}}var Mt=function(){function t(t,e,n,r){this.predicate=t,this.source=e,this.yieldIndex=n,this.thisArg=r}return t.prototype.call=function(t,e){return e.subscribe(new Vt(t,this.predicate,this.source,this.yieldIndex,this.thisArg))},t}(),Vt=function(s){function t(t,e,n,r,o){var i=s.call(this,t)||this;return i.predicate=e,i.source=n,i.yieldIndex=r,i.thisArg=o,i.index=0,i}return c(t,s),t.prototype.notifyComplete=function(t){var e=this.destination;e.next(t),e.complete(),this.unsubscribe()},t.prototype._next=function(t){var e=this.predicate,n=this.thisArg,r=this.index++;try{e.call(n||this,t,r,this.source)&&this.notifyComplete(this.yieldIndex?r:t)}catch(t){this.destination.error(t)}},t.prototype._complete=function(){this.notifyComplete(this.yieldIndex?-1:void 0)},t}(b);var zt=function(){function t(t,e){this.observables=t,this.project=e}return t.prototype.call=function(t,e){return e.subscribe(new Ht(t,this.observables,this.project))},t}(),Ht=function(u){function t(t,e,n){var r=u.call(this,t)||this;r.observables=e,r.project=n,r.toRespond=[];var o=e.length;r.values=new Array(o);for(var i=0;i<o;i++)r.toRespond.push(i);for(i=0;i<o;i++){var s=e[i];r.add(L(r,s,s,i))}return r}return c(t,u),t.prototype.notifyNext=function(t,e,n,r,o){this.values[n]=e;var i,s=this.toRespond;0<s.length&&(-1!==(i=s.indexOf(n))&&s.splice(i,1))},t.prototype.notifyComplete=function(){},t.prototype._next=function(t){var e;0===this.toRespond.length&&(e=[t].concat(this.values),this.project?this._tryProject(e):this.destination.next(e))},t.prototype._tryProject=function(t){var e;try{e=this.project.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},t}(k);function Ut(e,n){return function(t){return t.lift(new Jt(e,n))}}var Jt=function(){function t(t,e){this.predicate=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new Yt(t,this.predicate,this.thisArg))},t}(),Yt=function(o){function t(t,e,n){var r=o.call(this,t)||this;return r.predicate=e,r.thisArg=n,r.count=0,r}return c(t,o),t.prototype._next=function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}e&&this.destination.next(t)},t}(b);function Wt(e,n){var r=2<=arguments.length?!0:!1;return function(t){return t.lift(new Gt(e,n,r))}}var Gt=function(){function t(t,e,n){void 0===n&&(n=!1),this.accumulator=t,this.seed=e,this.hasSeed=n}return t.prototype.call=function(t,e){return e.subscribe(new $t(t,this.accumulator,this.seed,this.hasSeed))},t}(),$t=function(i){function t(t,e,n,r){var o=i.call(this,t)||this;return o.accumulator=e,o._seed=n,o.hasSeed=r,o.index=0,o}return c(t,i),Object.defineProperty(t.prototype,"seed",{get:function(){return this._seed},set:function(t){this.hasSeed=!0,this._seed=t},enumerable:!0,configurable:!0}),t.prototype._next=function(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)},t.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.accumulator(this.seed,t,n)}catch(t){this.destination.error(t)}this.seed=e,this.destination.next(e)},t}(b),Zt=function(){function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t}();var Kt=function(){function t(t){if(this.total=t,this.total<0)throw new bt}return t.prototype.call=function(t,e){return e.subscribe(new Qt(t,this.total))},t}(),Qt=function(r){function t(t,e){var n=r.call(this,t)||this;return n.total=e,n.ring=new Array,n.count=0,n}return c(t,r),t.prototype._next=function(t){var e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t},t.prototype._complete=function(){var t=this.destination,e=this.count;if(0<e)for(var n=this.count>=this.total?this.total:this.count,r=this.ring,o=0;o<n;o++){var i=e++%n;t.next(r[i])}t.complete()},t}(b);var Xt=function(){function t(t){this.errorFactory=t}return t.prototype.call=function(t,e){return e.subscribe(new te(t,this.errorFactory))},t}(),te=function(r){function t(t,e){var n=r.call(this,t)||this;return n.errorFactory=e,n.hasValue=!1,n}return c(t,r),t.prototype._next=function(t){this.hasValue=!0,this.destination.next(t)},t.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var e=void 0;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)},t}(b);function ee(){return new Zt}var ne=function(){function t(t){this.defaultValue=t}return t.prototype.call=function(t,e){return e.subscribe(new re(t,this.defaultValue))},t}(),re=function(r){function t(t,e){var n=r.call(this,t)||this;return n.defaultValue=e,n.isEmpty=!0,n}return c(t,r),t.prototype._next=function(t){this.isEmpty=!1,this.destination.next(t)},t.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},t}(b);function oe(i,t){var s=2<=arguments.length;return function(n){return n.pipe(i?Ut(function(t,e){return i(t,e,n)}):w,(o=1,function(t){return 0===o?mt():t.lift(new Kt(o))}),s?(void 0===(r=t)&&(r=null),function(t){return t.lift(new ne(r))}):(void 0===(e=function(){return new Zt})&&(e=ee),function(t){return t.lift(new Xt(e))}));var e,r,o}}function ie(e){return function(t){return t.lift(new se(e))}}var se=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){var n=new ue(t),r=L(n,this.notifier);return r&&!n.seenValue?(n.add(r),e.subscribe(n)):n},t}(),ue=function(n){function t(t){var e=n.call(this,t)||this;return e.seenValue=!1,e}return c(t,n),t.prototype.notifyNext=function(t,e,n,r,o){this.seenValue=!0,this.complete()},t.prototype.notifyComplete=function(){},t}(k);var ce=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new ae(t))},t}(),ae=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e.prototype._next=function(t){},e}(b),le=n(0),fe=function(t){return new _(function(e){try{var n=new WebSocket(t,"ritp");e.next({send:function(t){return n.send(t)},onOpen:function(e){n.onopen=function(t){e()}},onClose:function(e){n.onclose=function(t){e(t.reason)}},onBuffer:function(e){n.onmessage=function(t){e(t.data)}},close:function(){n.close()},isOpen:function(){return n.readyState==n.OPEN}}),e.complete()}catch(t){e.error(t)}})},he=function(t){var e=t.socket,y=t.myInfo,n=t.remoteInfoMapper,b=void 0===n?j:n;return e.pipe(et(function(t){var n=t.send,r=t.onBuffer,o=t.onClose,i=t.onOpen,s=t.close,u=t.isOpen;return new _(function(e){o(function(t){e.error(t)});var t=new _(function(e){r(function(t){e.next(t)})}).pipe(ft());return i(function(){e.next({send:n,buffers:t})}),function(){u()&&(n(le.ritp.Frame.encode({disconnect:{}}).finish()),s())}})}),G(function(t){function e(e){return l.pipe(qt(function(t){return t.key==e}),et(function(t){return t}))}var n,r=t.buffers,o=t.send,i=j(y).pipe(pt(function(t){return o(le.ritp.PeerInfo.encode(t).finish())})),s=r.pipe(wt(1),G(function(t){return le.ritp.PeerInfo.decode(t)})),u=s.pipe(et(b)),c=D(i,s,u).pipe(G(function(t){return{myInfo:t[0],remoteInfo:t[1],mappedInfo:t[2]}}),Pt()),a=r.pipe((n=1,function(t){return t.lift(new Ct(n))}),G(function(t){return le.ritp.Frame.decode(t)}),Tt(function(t){return t.type})),l=a.pipe(qt(function(t){return"event"==t.key}),et(function(t){return t}),G(function(t){return t.event})).pipe(Tt(function(t){return t.streamId}),et(function(t){var e=t.key,n=t.pipe(Tt(function(t){return t.type}),Pt()),r=n.pipe(wt(1),et(function(t){return"request"==t.key?t:M(new Error("oops!"))}),G(function(t){return t.request})),o=n.pipe(qt(function(t){return"chunk"==t.key}),et(function(t){return t}),G(function(t){return t.chunk})),i=n.pipe(qt(function(t){return"end"==t.key}),et(function(t){return t}),G(function(t){return t.end}));return r.pipe(G(function(t){return{streamId:e,handlerName:t.handlerName,request:t,chunks:o,end:i}}))})).pipe(Tt(function(t){return t.handlerName}),Pt()),f=c.pipe(G(function(t){return{peerContext:t,findStreamsByHandlerName:e,sender:{send:o}}})),h=a.pipe(qt(function(t){return"control"==t.key}),et(function(t){return t}),G(function(t){return t.control})).pipe(Tt(function(t){return t.streamId}),Pt()),p=new W(0),d=D(p.pipe(wt(1),pt(function(t){return p.next(t+1)})),c).pipe(G(function(t){var e=t[0];return{peerContext:t[1],controls:h.pipe(qt(function(t){return t.key==e}),et(function(t){return t})),sendRequest:function(t){return o(le.ritp.Frame.encode({event:{streamId:e,request:t}}).finish())},sendChunk:function(t){return o(le.ritp.Frame.encode({event:{streamId:e,chunk:t}}).finish())},sendEnd:function(t){return o(le.ritp.Frame.encode({event:{streamId:e,end:t}}).finish())}}}));return{stream:pe(d),register:de(f)}}))},pe=function(e){return function(t){var d=t.request,y=t.requester;return e.pipe(pt(function(t){return(0,t.sendRequest)(d)}),et(function(t){var e=t.peerContext,n=t.controls,r=t.sendChunk,o=t.sendEnd,i=new W(0),s=y({peerContext:e,request:d,sendableAmount:i}),u=i.pipe(G(function(t){return 0<t})),c=s.pipe(function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return function(t){var e;"function"==typeof n[n.length-1]&&(e=n.pop());return t.lift(new zt(n,e))}}(u),Ut(function(t){t[0];return t[1]}),pt(function(t){var e=t[0];t[1];return r(e)},function(t){return o({reason:le.ritp.End.Reason.CANCEL,detail:JSON.stringify(t)})},function(){return o({reason:le.ritp.End.Reason.FINISH})}),Wt(function(t,e){return t-1},0),ft()),a=c.pipe(oe()),l=n.pipe(Tt(function(t){return t.type})),f=l.pipe(qt(function(t){return"close"==t.key}),et(function(t){return t}),et(function(t){return M(t.close)})),h=l.pipe(qt(function(t){return"pull"==t.key}),et(function(t){return t}),Wt(function(t,e){return t+e.pull},0),ft()),p=nt(h,c).pipe(Wt(function(t,e){return t+e},0),pt(function(t){return i.next(t)}),ie(f),ie(a)).pipe(oe());return h.pipe(ie(p))}))}},de=function(e){return function(t){var n=t.handlerName,s=t.handler;t.bufferSize;return e.pipe(et(function(t){var o=t.peerContext,e=t.findStreamsByHandlerName,i=t.sender;return e(n).pipe(et(function(t){var e=t.request,n=t.chunks,r=t.streamId;return nt(s({peerContext:o,request:e,chunks:n}).pipe(pt(function(t){return i.send(le.ritp.Frame.encode({control:{streamId:r,pull:t}}).finish())},function(t){return i.send(le.ritp.Frame.encode({control:{streamId:r,close:{reason:le.ritp.Close.Reason.APPLICATION_ERROR,detail:JSON.stringify(t)}}}).finish())},function(){return i.send(le.ritp.Frame.encode({control:{streamId:r,close:{reason:le.ritp.Close.Reason.ABORT}}}).finish())}),function(t){return t.lift(new ce)}),n)}))}))}}}],e={},f.m=d,f.c=e,f.d=function(t,e,n){f.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},f.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},f.t=function(e,t){if(1&t&&(e=f(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(f.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)f.d(n,r,function(t){return e[t]}.bind(null,r));return n},f.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return f.d(e,"a",e),e},f.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},f.p="",f(f.s=20);function f(t){if(e[t])return e[t].exports;var n=e[t]={i:t,l:!1,exports:{}};return d[t].call(n.exports,n,n.exports,f),n.l=!0,n.exports}var d,e});